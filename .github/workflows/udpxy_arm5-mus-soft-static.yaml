name: 编译 C/C++ 项目
on:
  push:  # 提交代码时触发编译
    branches: [ main, master ]
  pull_request:  # 提 PR 时触发编译
    branches: [ main, master ]
  workflow_dispatch:  # 允许手动触发编译

jobs:
  build:
    runs-on: ubuntu-latest  # 编译环境（可选 windows-latest/macos-latest）
    steps:
      # 1. 拉取仓库代码
      - name: 检出代码
        uses: actions/checkout@v4

      # 2. 安装编译依赖（如 gcc、cmake、make 等）
      - name: 安装编译工具
        run: |
          sudo apt update
          sudo apt install -y gcc g++ cmake make

      # 3. 执行编译（根据项目构建方式调整）
      - name: 编译项目（CMake 示例）
        run: |
          mkdir build && cd build
          cmake ..
          make -j$(nproc)  # 多核编译，和本地一致

      # 4. 上传编译产物（可选，方便下载）
      - name: 上传编译结果
        uses: actions/upload-artifact@v4
        with:
          name: cxx-build-output
          path: build/  # 编译产物的目录，和本地输出路径一致
